{"version":3,"file":"/scripts/plugins/buddypress/general.js","mappings":"yBAEA,IAAWA,EAEDC,EACFC,EACAC,EAJGH,EAuFRI,OArFOH,EAAOD,EAAE,QACXE,EAAaF,EAAE,+BACfG,EAASH,EAAE,0CAGXE,EAAWG,QACXH,EAAWI,SAAS,CAChBC,aAAa,EACbC,OAAQ,EACRC,WAAY,sBACZC,SAAU,+BAAiCC,gBAAgBC,UAAY,SACvEC,WAAW,EACXC,WAAW,IAKfX,EAAOY,IAAI,MAAMV,QACjBF,EAAOG,SAAS,CACZC,aAAa,EACbC,OAAQ,EACRC,WAAY,sBACZC,SAAU,iCACVI,WAAW,EACXE,YAAa,WACT,QAAIb,EAAOc,QAAQ,eAAeC,SAAS,oBACnCC,OAAOC,WAAa,WAapCpB,EAAE,6BAA6BK,QAC/BL,EAAE,6BAA6BqB,UAAU,qBAAqBC,IAAI,CAAC,aAAc,MAIjFrB,EAAKiB,SAAS,WACdlB,EAAE,gBAAgBuB,QAAQ,CACtBC,UAAW,GACXC,SAAUd,gBAAgBe,eAC1BC,SAAUhB,gBAAgBiB,mBAK9B3B,EAAKiB,SAAS,aAAejB,EAAKiB,SAAS,gBAG3ClB,EAAEmB,QAAQU,QAAO,WAGb,IAAMC,EAAgB9B,EAAE,gBAGxB,GAAK8B,EAAcC,IAAI,KAAMD,EAAcE,KAAK,mBAAhD,CAKA,IACMC,EADMH,EAAcG,SACPC,IAAM,GAIrBlC,EAAEmB,QAAQgB,YAAcnC,EAAEmB,QAAQiB,SAAWH,IAC7CH,EAAcE,KAAK,kBAAmB,GACtCF,EAAcO,KAAK,KAAK,GAAGC,aAQnCtC,EAAE,0BAA0BK,OAAS,GACrCL,EAAE,6BAA6BuC,OAAO,qBAAuB5B,gBAAgB6B,kBAAoB,W","sources":["webpack://sage/./resources/scripts/plugins/buddypress/general.js"],"sourcesContent":["'use strict';\n\n(function ($) {\n\n    const body = $('body'),\n        profileNav = $('.nav-container .profile-nav'),\n        subNav = $('.bp-navs:not(.single-screen-navs) > ul');\n\n    // Initiate flex menu on profile nav\n    if (profileNav.length) {\n        profileNav.flexMenu({\n            showOnHover: false,\n            cutoff: 0,\n            popupClass: \"dropdown-menu-right\",\n            linkText: '<span class=\"nav-link-text\">' + growtype_params.text_more + '<text>',\n            showCount: true,\n            hOverflow: true,\n        });\n    }\n\n    // Flex menu for bp navs\n    if (subNav.has(\"li\").length) {\n        subNav.flexMenu({\n            showOnHover: false,\n            cutoff: 0,\n            popupClass: \"dropdown-menu-right\",\n            linkText: '<i class=\"uil-ellipsis-h\"></i>',\n            hOverflow: true,\n            shouldApply: function () {\n                if (subNav.closest('#buddypress').hasClass('bp-dir-vert-nav')) {\n                    if (window.innerWidth > 991.98) {\n                        return false;\n                    } else {\n                        return true;\n                    }\n                } else {\n                    return true;\n                }\n            },\n        });\n    }\n\n    // Move bp template notices\n    if ($('#item-header .bp-feedback').length) {\n        $('#item-header .bp-feedback').prependTo('.profile-col-main').css({'margin-top': '0'});\n    }\n\n    // Truncate about group text\n    if (body.hasClass('groups')) {\n        $('.about-group').shorten({\n            showChars: 75,\n            moreText: growtype_params.text_read_more,\n            lessText: growtype_params.text_read_close\n        });\n    }\n\n    // Load activity on scroll\n    if (body.hasClass('activity') || body.hasClass('group-home')) {\n\n        // Check the window scroll event.\n        $(window).scroll(function () {\n            // Find the visible \"load more\" button.\n            // since BP does not remove the \"load more\" button, we need to find the last one that is visible.\n            const load_more_btn = $('li.load-more');\n            // If there is no visible \"load more\" button, we've reached the last page of the activity stream.\n            // If data attribute is set, we already triggered request for ths specific button.\n            if (!load_more_btn.get(0) || load_more_btn.data('bpaa-autoloaded')) {\n                return;\n            }\n\n            // Find the offset of the button.\n            const pos = load_more_btn.offset();\n            const offset = pos.top - 50;// 50 px before we reach the button.\n\n            // If the window height+scrollTop is greater than the top offset of the \"load more\" button,\n            // we have scrolled to the button's position. Let us load more activity.\n            if ($(window).scrollTop() + $(window).height() > offset) {\n                load_more_btn.data('bpaa-autoloaded', 1);\n                load_more_btn.find('a')[0].click();\n            }\n        });\n    }\n\n    /**\n     * rtmedia\n     */\n    if ($('#rtmedia-action-update').length > 0) {\n        $('.rtmedia-add-media-button').append('<span class=\"btn\">' + growtype_params.text_attach_media + '</span>')\n    }\n})(jQuery);\n"],"names":["$","body","profileNav","subNav","jQuery","length","flexMenu","showOnHover","cutoff","popupClass","linkText","growtype_params","text_more","showCount","hOverflow","has","shouldApply","closest","hasClass","window","innerWidth","prependTo","css","shorten","showChars","moreText","text_read_more","lessText","text_read_close","scroll","load_more_btn","get","data","offset","top","scrollTop","height","find","click","append","text_attach_media"],"sourceRoot":""}