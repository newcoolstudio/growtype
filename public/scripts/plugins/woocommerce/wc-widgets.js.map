{"version":3,"file":"/scripts/plugins/woocommerce/wc-widgets.js","mappings":"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","sources":["webpack://sage/./resources/scripts/plugins/woocommerce/wc-widgets.js","webpack://sage/./resources/scripts/plugins/woocommerce/widgets/price.js","webpack://sage/./resources/scripts/plugins/woocommerce/widgets/sorting.js","webpack://sage/./resources/scripts/util/update-url-parameter.js","webpack://sage/./resources/scripts/plugins/woocommerce/widgets/categories.js"],"sourcesContent":["import {sorting} from \"./widgets/sorting\";\nimport {price} from \"./widgets/price\";\nimport {categories} from \"./widgets/categories\";\n\njQuery(document).ready(() => {\n  sorting();\n  price();\n  categories();\n});\n","function price() {\n    const filterProductsByPriceEvent = new Event('filterProductsByPrice');\n    var price_values = 0;\n\n    $(\".price_slider\").on(\"slidestart\", function (event, ui) {\n        price_values = ui.values;\n    });\n\n    $(\".price_slider\").on(\"slidestop\", function (event, ui) {\n        if (JSON.stringify(price_values) == JSON.stringify(ui.values)) {\n            return false;\n        }\n        var filter = $('.widget_price_filter form');\n        var existing_products = $('body').find('.products');\n        var existing_main = $('body').find('.site-main');\n\n        $.ajax({\n            url: filter.attr('action'),\n            data: filter.serialize(), // form data\n            type: filter.attr('method'), // POST\n            beforeSend: function (xhr) {\n                existing_products.addClass('is-loading');\n            },\n            success: function (data) {\n                var filtered_products = $(data).find('.products');\n                var filtered_main = $(data).find('.site-main');\n                window.history.pushState('page-url', 'url', filter.attr('action') + '?' + filter.serialize());\n                $('.woocommerce-info').remove();\n                if (filtered_products.html().length === 1) {\n                    $('.site-main').prepend($(data).find('.woocommerce-info'));\n                }\n                existing_main.replaceWith(filtered_main);\n                document.dispatchEvent(filterProductsByPriceEvent);\n            }\n        });\n    });\n\n}\n\nexport {price};\n","import updateURLParameter from '../../../util/update-url-parameter';\n\nfunction sorting() {\n    const filterProductsByOrderEvent = new Event('filterProductsByOrder');\n\n    document.addEventListener('filterProductsByPrice', widgetOrderInit)\n    document.addEventListener('filterProductsByCategories', widgetOrderInit)\n\n    function widgetOrderInit() {\n\n        $('.woocommerce-ordering').submit(function (e) {\n            e.preventDefault();\n        });\n\n        /**\n         * Initiate select\n         */\n\n        $('.woocommerce-ordering select').change(function (e) {\n            let orderby = $(this).val();\n            let categoryId = '';\n            let orderingName = $(this).attr('name')\n            let orderingValue = $(this).val()\n\n            if (typeof $('body')[0] !== undefined && $('body')[0].className.match(/term-\\d+/) !== null) {\n                categoryId = $('body')[0].className.match(/term-\\d+/)[0];\n                categoryId = categoryId.replace(\"term-\", \"\");\n            }\n\n            window.history.replaceState('', '', updateURLParameter(window.location.href, orderingName, orderingValue));\n\n            $('.woocommerce-pagination .page-numbers').each(function (index, element) {\n                if (typeof $(element).attr('href') !== 'undefined') {\n                    let regex = new RegExp('(' + orderingName + '=)[^\\&]+');\n                    $(element).attr('href', $(element).attr('href').replace(regex, '$1' + orderingValue));\n                }\n            });\n\n            if (window.location.pathname.includes(\"/page/\")) {\n                window.location = $('a.page-numbers').first().attr('href');\n                return false;\n            }\n\n            /**\n             * Set current orderby value\n             */\n            woocommerce_params_widgets.orderby = orderby;\n\n            if (categoryId.length > 0) {\n                woocommerce_params_widgets.categories_ids = [categoryId];\n            }\n\n            /**\n             * Get products\n             */\n            $.ajax({\n                url: woocommerce_params.ajax_url,\n                type: \"post\",\n                data: {\n                    orderby: woocommerce_params_widgets.orderby,\n                    action: 'filter_products',\n                    categories_ids: woocommerce_params_widgets.categories_ids,\n                },\n                beforeSend: function () {\n                    $('.products').addClass('is-loading');\n                },\n                success: function (data) {\n                    $('.products').removeClass('is-loading').html(\"\").append(data).promise().done(function () {\n                        document.dispatchEvent(filterProductsByOrderEvent);\n                    });\n                }\n            });\n        });\n    }\n\n    widgetOrderInit();\n}\n\nexport {sorting};\n\n\n","export default function updateURLParameter(url, param, paramVal)\n{\n    let TheAnchor = null;\n    let newAdditionalURL = \"\";\n    let tempArray = url.split(\"?\");\n    let baseURL = tempArray[0];\n    let additionalURL = tempArray[1];\n    let temp = \"\";\n\n    if (additionalURL)\n    {\n        let tmpAnchor = additionalURL.split(\"#\");\n        let TheParams = tmpAnchor[0];\n        TheAnchor = tmpAnchor[1];\n        if(TheAnchor)\n            additionalURL = TheParams;\n\n        tempArray = additionalURL.split(\"&\");\n\n        for (let i=0; i<tempArray.length; i++)\n        {\n            if(tempArray[i].split('=')[0] != param)\n            {\n                newAdditionalURL += temp + tempArray[i];\n                temp = \"&\";\n            }\n        }\n    }\n    else\n    {\n        let tmpAnchor = baseURL.split(\"#\");\n        let TheParams = tmpAnchor[0];\n        TheAnchor  = tmpAnchor[1];\n\n        if(TheParams)\n            baseURL = TheParams;\n    }\n\n    if(TheAnchor)\n        paramVal += \"#\" + TheAnchor;\n\n    let rows_txt = temp + \"\" + param + \"=\" + paramVal;\n    return baseURL + \"?\" + newAdditionalURL + rows_txt;\n}\n","import updateURLParameter from \"../../../util/update-url-parameter\";\n\nfunction categories() {\n    const filterProductsByCategories = new Event('filterProductsByCategories');\n\n    // document.addEventListener('filterProductsByPrice', widgetCategoriesInit)\n    // document.addEventListener('filterProductsByOrder', widgetCategoriesInit)\n\n    widgetCategoriesInit();\n\n    /**\n     *\n     */\n    function widgetCategoriesInit() {\n        if ($('.product-categories[data-multiple=\"true\"]').length > 0) {\n\n            let currentCategoriesIds = getCurrentCategoriesIds();\n\n            if (currentCategoriesIds.length > 0) {\n                currentCategoriesIds.map(function (id) {\n                    $('.product-categories .cat-item-' + id).addClass('current-cat');\n                });\n\n                getFilteredProductsByCategory(currentCategoriesIds);\n            }\n\n            /**\n             * Cat click\n             */\n            $('.product-categories[data-multiple=\"true\"] a').click(function (e) {\n                e.preventDefault();\n                const parent = $(this).closest('.cat-item');\n                const classes = parent.attr('class').split(' ');\n                let catId = null;\n                let currentCategoriesIds = [];\n                let newCategoriesIds = [];\n\n                /**\n                 * Disable parent\n                 */\n                if ($('.product-categories[data-multiple-include-parent=\"true\"]').length === 0) {\n                    if (parent.hasClass('cat-parent')) {\n                        return false;\n                    }\n                }\n\n                /**\n                 * Get categories\n                 */\n                if (classes.length >= 2) {\n                    catId = classes[1];\n                    catId = catId.split(\"cat-item-\").pop();\n                }\n\n                /**\n                 * If no categories found, redirect\n                 */\n                if (catId === null) {\n                    window.redirect($(this).attr('href'))\n                }\n\n                currentCategoriesIds = getCurrentCategoriesIds();\n                newCategoriesIds = getCurrentCategoriesIds();\n\n                /**\n                 * Update categories with new ids\n                 */\n                if (parent.hasClass('current-cat')) {\n                    parent.removeClass('current-cat');\n\n                    let index = newCategoriesIds.indexOf(catId);\n                    if (index !== -1) {\n                        newCategoriesIds.splice(index, 1);\n                    }\n                } else {\n                    parent.addClass('current-cat');\n                    newCategoriesIds.push(catId)\n                }\n\n                updateSearchUrl(currentCategoriesIds, newCategoriesIds);\n\n                getFilteredProductsByCategory(newCategoriesIds);\n            });\n\n            /**\n             * Clear selections\n             */\n            $('.btn-clear-cat-filter').click(function () {\n                let currentCategoriesIds = getCurrentCategoriesIds();\n\n                if (currentCategoriesIds.length > 0) {\n                    updateSearchUrl(currentCategoriesIds);\n\n                    getFilteredProductsByCategory();\n\n                    $('.product-categories .cat-item').removeClass('current-cat');\n                }\n            });\n        }\n    }\n\n    /**\n     * @param categoriesIds\n     */\n    function getFilteredProductsByCategory(categoriesIds = []) {\n\n        woocommerce_params_widgets.categories_ids = categoriesIds;\n\n        $.ajax({\n            url: woocommerce_params.ajax_url,\n            type: \"post\",\n            data: {\n                orderby: woocommerce_params_widgets.orderby,\n                action: 'filter_products',\n                categories_ids: categoriesIds,\n            },\n            beforeSend: function () {\n                $('.products').addClass('is-loading');\n            },\n            success: function (data) {\n                $('.products').removeClass('is-loading').html(\"\").append(data).promise().done(function () {\n                    // document.dispatchEvent(filterProductsByOrderEvent);\n                });\n            }\n        });\n    }\n\n    /**\n     * Update url\n     */\n    function updateSearchUrl(currentCategoriesIds = [], newCategoriesIds = []) {\n        const currentUrl = window.location.href;\n        let newUrl = null;\n\n        if (newCategoriesIds.length > 0) {\n            if (currentUrl.includes(\"categories\")) {\n                newUrl = currentUrl.replace(\"categories=\" + currentCategoriesIds.toString(), \"categories=\" + newCategoriesIds.toString());\n            } else if (window.location.search.length > 0) {\n                newUrl = currentUrl + '&categories=' + newCategoriesIds.toString() + '';\n            } else {\n                newUrl = currentUrl + '?categories=' + newCategoriesIds.toString() + '';\n            }\n        } else {\n            newUrl = currentUrl\n                .replace(\"&categories=\" + currentCategoriesIds.toString(), \"\")\n                .replace(\"?categories=\" + currentCategoriesIds.toString() + '&', \"?\")\n                .replace(\"?categories=\" + currentCategoriesIds.toString(), \"\")\n        }\n\n        if (newUrl.length > 0) {\n            window.history.pushState('page-url', 'url', newUrl);\n        }\n    }\n\n    /**\n     * Get categories ids\n     */\n    function getCurrentCategoriesIds() {\n        const currentUrl = window.location.href;\n        const site = new URL(currentUrl);\n        const params = new URLSearchParams(site.search);\n        let currentCategoriesIds = [];\n\n        for (const param of params) {\n            if (param[0].length > 0 && param[0] === 'categories') {\n                currentCategoriesIds = param[1].split(\",\");\n            }\n        }\n\n        return currentCategoriesIds;\n    }\n}\n\nexport {categories};\n"],"names":["jQuery","document","ready","filterProductsByPriceEvent","price_values","filterProductsByOrderEvent","Event","widgetOrderInit","$","submit","e","preventDefault","change","orderby","this","val","categoryId","orderingName","attr","orderingValue","undefined","className","match","replace","window","history","replaceState","url","param","paramVal","TheAnchor","newAdditionalURL","tempArray","split","baseURL","additionalURL","temp","tmpAnchor","TheParams","i","length","updateURLParameter","location","href","each","index","element","regex","RegExp","pathname","includes","first","woocommerce_params_widgets","categories_ids","ajax","woocommerce_params","ajax_url","type","data","action","beforeSend","addClass","success","removeClass","html","append","promise","done","dispatchEvent","addEventListener","sorting","on","event","ui","values","JSON","stringify","filter","existing_products","find","existing_main","serialize","xhr","filtered_products","filtered_main","pushState","remove","prepend","replaceWith","getFilteredProductsByCategory","categoriesIds","updateSearchUrl","currentCategoriesIds","newCategoriesIds","currentUrl","newUrl","toString","search","getCurrentCategoriesIds","site","URL","URLSearchParams","map","id","click","parent","closest","classes","catId","hasClass","pop","redirect","indexOf","splice","push","widgetCategoriesInit","categories"],"sourceRoot":""}