!function(t){document.addEventListener("filterProductsByOrder",m),document.addEventListener("filterProductsByPrice",m);var i="<span class='spinner-border' style='width:100%;top:50px;'><div></div><div></div></span>",e=t(".wishlist main .content");function s(t,i){return i.indexOf(t)>-1}Array.prototype.unique=function(){return this.filter((function(t,i,e){return e.indexOf(t)===i}))};var n=woocommerce_params_wishlist.shop_name+"-wishlist",a=woocommerce_params_wishlist.in_wishlist_text,o=woocommerce_params_wishlist.rest_url,r=new Array,l=sessionStorage.getItem(n),d=!!t("body").hasClass("logged-in"),c="";function u(){e.append(i),t.ajax({type:"POST",url:woocommerce_params.ajax_url,data:{action:"fetch_user_data",dataType:"json",wishlist_ids:r},success:function(t){e.find(".spinner-border").remove(),c=JSON.parse(t),r=c.wishlist_ids,e.length>0&&(0===e.find(".products").length?e.hide().html(c.wishlist).fadeIn():e.html(c.wishlist)),d&&sessionStorage.removeItem(n),m()},error:function(){}})}function h(s){s.on("click",(function(o){if(o.preventDefault(),!t(this).hasClass("is-loading")){if(t(this).addClass("is-loading"),t(this).hasClass("is-active")){t(this).removeClass("is-active"),t("body").hasClass("wishlist")&&t(this).closest(".product").fadeOut().promise().done((function(){t(this).remove()}));for(var l=r.length-1;l>=0;l--)r[l]==t(this).data("product")&&r.splice(l,1)}else t(this).addClass("is-active"),r.push(t(this).data("product").toString());0===(r=r.unique().filter((function(t){return""!==t}))).length&&e.length>0&&e.append(i),t(".e-wishlist").attr("data-amount",r.length),d?t.ajax({type:"POST",url:woocommerce_params_wishlist.ajax_post,data:{action:"user_wishlist_update",user_id:c.user_id,wishlist_ids:r.join(",")}}).done((function(t){0===r.length&&u()})).fail((function(t){alert(woocommerce_params_wishlist.error_text)})):(sessionStorage.setItem(n,r.toString()),0===r.length&&u()),h=s,m=a,setTimeout((function(){h.removeClass("is-loading").attr("title",m)}),500)}var h,m}))}function m(){r=r.filter((function(t){return""!=t})),t(".e-wishlist").attr("data-amount",r.length),t(".wishlist-toggle").each((function(){var i=t(this);if(!d){var e=i.data("product");e=e.toString(),!d&&s(e,r)&&i.addClass("is-active").attr("title",a)}h(i)}))}d?u():(void 0!==l&&null!=l&&(l=(l=l.split(",")).unique(),r=l),e.length>0?u():m()),h(t(".wishlist-toggle")),setTimeout((function(){r.length&&(o+="?include="+r.join(","),o+="&per_page="+r.length,t.ajax({dataType:"json",url:o}).done((function(t){})).fail((function(t){alert(woocommerce_params_wishlist.no_wishlist_text)})))}),1e3)}(jQuery);